<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Cart</title>
    <link rel="stylesheet" href="cart.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="../images/logo.png" alt="Reesha">
            <span>Reesha ريشة</span>
        </div>
        <nav>
            <ul class="nav-links">
                <li><a href="../Home/index.html">Home</a></li>
                <li><a href="../Search/Search.html">Search</a></li>
                <li><a href="../Auction/Auction.html">Auctions</a></li>
                <li><a href="../Cart/Cart.html">Cart</a></li>
            </ul>
            <div class="icons">
                <img src="../images/heart.png" alt="Wishlist" id="wishlist-header">
                <img src="../images/profile.png" alt="Profile" id="profile-header">
            </div>
        </nav>
    </header>
    
    <div class="container">
        <div class="cart-section">
            <div class="cart-items">
                <h2>My Cart</h2>
            </div>
            <div class="checkout-section">
                <p><strong>Order details</strong></p>
                <p><strong>Total:</strong> <span id="total-price" style="float: right;">$0</span></p>
                <input type="checkbox"> By clicking, you agree to our Terms & Conditions
                <button class="checkout-btn">Checkout</button>
            </div>
        </div>
    </div>
    <footer>
        <p>&copy; IT320 2025 Reesha. All rights reserved.</p>
    </footer>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cartContainer = document.querySelector(".cart-items");
            const totalPriceElement = document.getElementById("total-price");

            function loadCartItems() {
                let cartItems = JSON.parse(localStorage.getItem("cart")) || [];
                console.log("Loaded Cart Items:", cartItems); // Debugging log
                
                cartContainer.innerHTML = "<h2>My Cart</h2>";
                let totalPrice = 0;
                
                if (cartItems.length === 0) {
                    cartContainer.innerHTML += "<p>Your cart is empty.</p>";
                    totalPriceElement.textContent = "$0";
                    return;
                }

                // Prevent duplicate display
                const uniqueItems = new Map();
                cartItems.forEach(item => {
                    uniqueItems.set(item.title, item);
                });

                uniqueItems.forEach((item) => {
                    let priceValue = item.price.replace(/[^0-9.]/g, "");
                    totalPrice += parseFloat(priceValue);
                    const cartItemHTML = `
                        <div class="cart-item">
                            <img src="${item.image}" alt="${item.title}">
                            <div class="item-info">
                                <h3>${item.title}</h3>
                            </div>
                            <span class="price">$${priceValue}</span>
                            <button class="delete-btn" data-title="${item.title}">✖</button>
                        </div>
													 <div class="shipping">
                            <p><strong>Shipping method</strong></p>
                            <input type="radio" checked> Delivery Included
                        </div>
                    `;
                    cartContainer.innerHTML += cartItemHTML;
                });

                totalPriceElement.textContent = `$${totalPrice.toFixed(2)}`;

                document.querySelectorAll(".delete-btn").forEach(button => {
                    button.addEventListener("click", function () {
                        removeFromCart(this.dataset.title);
                    });
                });
            }

function removeFromCart(title) {
    if (confirm("Are you sure you want to remove this item from your cart?")) {
        let cartItems = JSON.parse(localStorage.getItem("cart")) || [];
        cartItems = cartItems.filter(item => item.title !== title);
        localStorage.setItem("cart", JSON.stringify(cartItems));
        loadCartItems();
    }
}


            loadCartItems();
        });
    </script>
	
		<script>
	// JavaScript to handle the clicks for the elements
	document.addEventListener("DOMContentLoaded", function() {

    // Redirect to index.html when clicking on the logo
    document.querySelector(".logo").addEventListener("click", function() {
        window.location.href = "index.html";
    });

    // Redirect to Wishlist.html when clicking on the wishlist icon
    document.querySelector("#wishlist-header").addEventListener("click", function() {
        window.location.href = "../Wishlist/Wishlist.html";
    });

    // Redirect to Profile.html when clicking on the profile icon
    document.querySelector("#profile-header").addEventListener("click", function() {
        window.location.href = "../Profile/Profile.html";
    });

	});



</script>
</body>
</html>








